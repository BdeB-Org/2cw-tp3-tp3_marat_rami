-- Generated by Oracle SQL Developer Data Modeler 23.1.0.087.0806
--   at:        2024-05-23 15:48:59 EDT
--   site:      Oracle Database 21c
--   type:      Oracle Database 21c



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE entrainements (
    id_entrainement    NUMBER NOT NULL,
    date_entrainement  DATE NOT NULL,
    focus_entrainement VARCHAR2(15) NOT NULL,
    notes              VARCHAR2(50),
    matches_id_match   NUMBER NOT NULL
);

ALTER TABLE entrainements ADD CONSTRAINT entrainements_pk PRIMARY KEY ( id_entrainement );

CREATE TABLE joueurs (
    id_joueur      NUMBER NOT NULL,
    nom_joueur     VARCHAR2(20) NOT NULL,
    position       VARCHAR2(15) NOT NULL,
    numero_maillot NUMBER NOT NULL,
    date_naissance DATE NOT NULL,
    contact        VARCHAR2(30) NOT NULL
);

ALTER TABLE joueurs ADD CONSTRAINT joueurs_pk PRIMARY KEY ( id_joueur );

CREATE TABLE matches (
    id_match   NUMBER NOT NULL,
    adversaire VARCHAR2(20) NOT NULL,
    date_match DATE NOT NULL,
    location   VARCHAR2(50) NOT NULL,
    result     VARCHAR2(5) NOT NULL
);

ALTER TABLE matches ADD CONSTRAINT matches_pk PRIMARY KEY ( id_match );

CREATE TABLE performance (
    id_performance    NUMBER NOT NULL,
    buts              NUMBER NOT NULL,
    assists           NUMBER NOT NULL,
    temps_joue        NUMBER NOT NULL,
    joueurs_id_joueur NUMBER NOT NULL,
    matches_id_match  NUMBER NOT NULL
);

ALTER TABLE performance ADD CONSTRAINT performance_pk PRIMARY KEY ( id_performance );

ALTER TABLE entrainements
    ADD CONSTRAINT entrainements_matches_fk FOREIGN KEY ( matches_id_match )
        REFERENCES matches ( id_match );

ALTER TABLE performance
    ADD CONSTRAINT performance_joueurs_fk FOREIGN KEY ( joueurs_id_joueur )
        REFERENCES joueurs ( id_joueur );

ALTER TABLE performance
    ADD CONSTRAINT performance_matches_fk FOREIGN KEY ( matches_id_match )
        REFERENCES matches ( id_match );
        


INSERT INTO joueurs (id_joueur, nom_joueur, position, numero_maillot, date_naissance, contact) VALUES
(1, 'Lionel Messi', 'Forward', 10, '1987-06-24', 'messi@example.com'),
(2, 'Cristiano Ronaldo', 'Forward', 7, '1985-02-05', 'ronaldo@example.com'),
(3, 'Neymar Jr.', 'Forward', 11, '1992-02-05', 'neymar@example.com'),
(4, 'Kevin De Bruyne', 'Midfielder', 17, '1991-06-28', 'debruyne@example.com'),
(5, 'Virgil van Dijk', 'Defender', 4, '1991-07-08', 'vandijk@example.com'),
(6, 'Sergio Ramos', 'Defender', 5, '1986-03-30', 'ramos@example.com'),
(7, 'Luka Modrić', 'Midfielder', 10, '1985-09-09', 'modric@example.com'),
(8, 'N''Golo Kanté', 'Midfielder', 7, '1991-03-29', 'kante@example.com'),
(9, 'Kylian Mbappé', 'Forward', 7, '1998-12-20', 'mbappe@example.com'),
(10, 'Alisson Becker', 'Goalkeeper', 1, '1992-10-02', 'alisson@example.com'),
(11, 'Joshua Kimmich', 'Defender', 6, '1995-02-08', 'kimmich@example.com');

INSERT INTO matches (id_match,adversaire,date_match,location,result) VALUES
(1, 'Real Madrid', '2024-06-10', 'Estadio Azteca', 'Win'),
(2, 'Manchester United', '2024-06-17', 'Old Trafford', 'Draw'),
(3, 'Liverpool', '2024-06-24', 'Santiago Bernabéu', 'Loss'),
(4, 'Bayern Munich', '2024-07-01', 'Allianz Arena', 'Win'),
(5, 'Arsenal', '2024-07-08', 'Camp Nou', 'Win');


INSERT INTO entrainements (id_entrainement, matches_id_match, date_entrainement, focus_entrainement, notes) VALUES
(1, 1, '2024-06-01', 'Tactics', 'Focus on defensive strategies'),
(2, 1, '2024-06-03', 'Fitness', 'Endurance training'),
(3, 2, '2024-06-05', 'Passing', 'Improve passing accuracy'),
(4, 2, '2024-06-07', 'Shooting', 'Shooting drills and techniques'),
(5, 3, '2024-06-09', 'Teamwork', 'Building team cohesion and communication'); 

INSERT INTO performance (id_performance,joueurs_id_joueur,matches_id_match,buts,assists,temps_joue) VALUES
(1, 1, 1, 2, 1, 90),
(2, 2, 1, 1, 1, 90),
(3, 3, 2, 0, 2, 90),
(4, 4, 2, 1, 0, 90),
(5, 5, 3, 0, 0, 90),
(6, 6, 3, 1, 1, 90),
(7, 7, 4, 0, 3, 90),
(8, 8, 4, 2, 0, 90),
(9, 9, 5, 1, 2, 90),
(10, 10, 5, 0, 0, 90);

      -- Enable schema for RESTful services
BEGIN
  ORDS.enable_schema(
    p_enabled             => TRUE,
    p_schema              => 'RESTSCOTT',
    p_url_mapping_type    => 'BASE_PATH',
    p_url_mapping_pattern => 'hr2',
    p_auto_rest_auth      => FALSE
  );
    
  COMMIT;
END;
/

-- Enable tables for RESTful services
BEGIN
  ORDS.enable_object (
    p_enabled      => TRUE,
    p_schema       => 'RESTSCOTT',
    p_object       => 'ENTRAINEMENTS',
    p_object_type  => 'TABLE',
    p_object_alias => 'entrainements'
  );
    
  COMMIT;
END;
/

BEGIN
  ORDS.enable_object (
    p_enabled      => TRUE,
    p_schema       => 'RESTSCOTT',
    p_object       => 'JOUEURS',
    p_object_type  => 'TABLE',
    p_object_alias => 'joueurs'
  );
    
  COMMIT;
END;
/

BEGIN
  ORDS.enable_object (
    p_enabled      => TRUE,
    p_schema       => 'RESTSCOTT',
    p_object       => 'MATCHES',
    p_object_type  => 'TABLE',
    p_object_alias => 'matches'
  );
    
  COMMIT;
END;
/

BEGIN
  ORDS.enable_object (
    p_enabled      => TRUE,
    p_schema       => 'RESTSCOTT',
    p_object       => 'PERFORMANCE',
    p_object_type  => 'TABLE',
    p_object_alias => 'performance'
  );
    
  COMMIT;
END;
/

